CREATE TABLE cliente (id varchar(6) NOT NULL, tipo_clienteid int(2) NOT NULL, PRIMARY KEY (id));
CREATE TABLE bebida (id varchar(7) NOT NULL, nombre varchar(255), descripcion varchar(255), preparacion varchar(7) NOT NULL, precio float NOT NULL, imagen varchar(255), tipo_bebida int(3) NOT NULL, PRIMARY KEY (id));
CREATE TABLE tipo_plato (id int(3) NOT NULL AUTO_INCREMENT, tipo_plato varchar(255) NOT NULL, PRIMARY KEY (id));
CREATE TABLE tipo_bebida (id int(3) NOT NULL AUTO_INCREMENT, tipo_bebida varchar(255) NOT NULL, PRIMARY KEY (id));
CREATE TABLE plato (id varchar(7) NOT NULL, nombre varchar(255) NOT NULL, descripcion varchar(255) NOT NULL, preparacion varchar(7) NOT NULL, precio float NOT NULL, imagen varchar(255), tipo_platoid int(3) NOT NULL, tipo_plato int(3) NOT NULL, PRIMARY KEY (id));
CREATE TABLE presentacion (id int(6) NOT NULL AUTO_INCREMENT, fecha date NOT NULL, hora time NOT NULL, descripcion varchar(255), PRIMARY KEY (id));
CREATE TABLE mesa (id varchar(6) NOT NULL, cant_plazas int(2) NOT NULL, estado tinyint(1) NOT NULL, codigo varchar(255) NOT NULL, PRIMARY KEY (id));
CREATE TABLE trabajador (id varchar(6) NOT NULL, grupo_trabajoid varchar(7) NOT NULL, cargoid_cargo int(2) NOT NULL, PRIMARY KEY (id));
CREATE TABLE turno_trabajo (id varchar(10) NOT NULL, fecha date NOT NULL, recaudacion float NOT NULL, descripcion varchar(255), PRIMARY KEY (id));
CREATE TABLE turno_trabajo_trabajador (turno_trabajoid varchar(10) NOT NULL, trabajadorid varchar(6) NOT NULL, hora_entrada time NOT NULL, hora_salida time NOT NULL, PRIMARY KEY (turno_trabajoid, trabajadorid));
CREATE TABLE pedido (id varchar(10) NOT NULL, fecha date NOT NULL, saldo float NOT NULL, mesaid varchar(6) NOT NULL, clienteid varchar(6) NOT NULL, PRIMARY KEY (id));
CREATE TABLE bebida_pedido (bebidaid varchar(7) NOT NULL, pedidoid varchar(10) NOT NULL, cantidad int(3) NOT NULL, estado int(1) NOT NULL, PRIMARY KEY (bebidaid, pedidoid));
CREATE TABLE plato_pedido (pedidoid varchar(10) NOT NULL, platoid varchar(7) NOT NULL, cantidad int(3) NOT NULL, estado int(1) NOT NULL, PRIMARY KEY (pedidoid, platoid));
CREATE TABLE comentario (id_comentario varchar(8) NOT NULL, comentario varchar(500), fecha date, clienteid varchar(6) NOT NULL, bebidaid varchar(7) NOT NULL, platoid varchar(7) NOT NULL, presentacionid int(6) NOT NULL, turno_trabajoid varchar(10) NOT NULL, PRIMARY KEY (id_comentario));
CREATE TABLE Ingredientes (Id_ingrediente varchar(7) NOT NULL, Nombre varchar(255), cantidad int(10), PRIMARY KEY (Id_ingrediente));
CREATE TABLE Receta_Bebida (id varchar(7) NOT NULL, preparacion varchar(255) NOT NULL, PRIMARY KEY (id));
CREATE TABLE receta_ingredientes_bebidas (Receta_Bebidaid varchar(7) NOT NULL, IngredientesId_ingrediente varchar(7) NOT NULL, cantidad int(10), PRIMARY KEY (Receta_Bebidaid, IngredientesId_ingrediente));
CREATE TABLE receta_plato (id varchar(7) NOT NULL, preparacion varchar(255) NOT NULL, PRIMARY KEY (id));
CREATE TABLE receta_ingredientes_platos (cantidad int(10) NOT NULL, IngredientesId_ingrediente varchar(7) NOT NULL, receta_platoid varchar(7) NOT NULL, PRIMARY KEY (IngredientesId_ingrediente, receta_platoid));
CREATE TABLE trazas (idTraza int(10) NOT NULL AUTO_INCREMENT, Accion varchar(255) NOT NULL, Tabla_afectada varchar(50) NOT NULL, Fecha date NOT NULL, hora time NOT NULL, userid_user varchar(6) NOT NULL, CONSTRAINT id PRIMARY KEY (idTraza));
CREATE TABLE `user` (id_user varchar(6) NOT NULL, password_hash varchar(255) NOT NULL, password_reset_token varchar(255) NOT NULL, email varchar(255) NOT NULL, telefono varchar(12) NOT NULL, auth_key varchar(255) NOT NULL, status int(10) NOT NULL, created_at int(10) NOT NULL, updated_at int(10) NOT NULL, RolId_rol int(2) NOT NULL, CONSTRAINT id PRIMARY KEY (id_user)) comment='-- phpMyAdmin SQL Dump -- version 4.5.1 -- http://www.phpmyadmin.net -- -- Host: 127.0.0.1 -- Generation Time: Mar 21, 2018 at 06:09 PM -- Server version: 10.1.10-MariaDB -- PHP Version: 7.0.4  SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO"; SET time_zone = "+00:00";   /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */; /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */; /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */; /*!40101 SET NAMES utf8mb4 */;  -- -- Database: `servicuen` --  -- --------------------------------------------------------  -- -- Table structure for table `user` --  CREATE TABLE `user` ( `id` int(10) NOT NULL, `username` varchar(255) NOT NULL, `password_hash` varchar(255) NOT NULL, `password_reset_token` varchar(255) NOT NULL, `email` varchar(255) NOT NULL, `telefono` varchar(255) NOT NULL, `auth_key` varchar(255) NOT NULL, `status` int(10) NOT NULL, `created_at` int(10) NOT NULL, `updated_at` int(10) NOT NULL, `password write-only password` varchar(255) NOT NULL, `tipo_userid` int(2) NOT NULL ) ENGINE=InnoDB DEFAULT CHARSET=latin1;  -- -- Indexes for dumped tables --  -- -- Indexes for table `user` -- ALTER TABLE `user` ADD PRIMARY KEY (`id`), ADD UNIQUE KEY `email` (`email`), ADD UNIQUE KEY `telefono` (`telefono`), ADD KEY `tipo_userid` (`tipo_userid`), ADD KEY `FKuser29654` (`tipo_userid`);  -- -- AUTO_INCREMENT for dumped tables --  -- -- AUTO_INCREMENT for table `user` -- ALTER TABLE `user` MODIFY `id` int(10) NOT NULL AUTO_INCREMENT; -- -- Constraints for dumped tables --  -- -- Constraints for table `user` -- ALTER TABLE `user` ADD CONSTRAINT `FKuser29654` FOREIGN KEY (`tipo_userid`) REFERENCES `tipo_user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;  /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */; /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; -- phpMyAdmin SQL Dump -- version 4.5.1 -- http://www.phpmyadmin.net -- -- Host: 127.0.0.1 -- Generation Time: Mar 21, 2018 at 06:09 PM -- Server version: 10.1.10-MariaDB -- PHP Version: 7.0.4  SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO"; SET time_zone = "+00:00";   /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */; /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */; /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */; /*!40101 SET NAMES utf8mb4 */;  -- -- Database: `servicuen` --  -- --------------------------------------------------------  -- -- Table structure for table `user` --  CREATE TABLE `user` ( `id` int(10) NOT NULL, `username` varchar(255) NOT NULL, `password_hash` varchar(255) NOT NULL, `password_reset_token` varchar(255) NOT NULL, `email` varchar(255) NOT NULL, `telefono` varchar(255) NOT NULL, `auth_key` varchar(255) NOT NULL, `status` int(10) NOT NULL, `created_at` int(10) NOT NULL, `updated_at` int(10) NOT NULL, `password write-only password` varchar(255) NOT NULL, `tipo_userid` int(2) NOT NULL ) ENGINE=InnoDB DEFAULT CHARSET=latin1;  -- -- Indexes for dumped tables --  -- -- Indexes for table `user` -- ALTER TABLE `user` ADD PRIMARY KEY (`id`), ADD UNIQUE KEY `email` (`email`), ADD UNIQUE KEY `telefono` (`telefono`), ADD KEY `tipo_userid` (`tipo_userid`), ADD KEY `FKuser29654` (`tipo_userid`);  -- -- AUTO_INCREMENT for dumped tables --  -- -- AUTO_INCREMENT for table `user` -- ALTER TABLE `user` MODIFY `id` int(10) NOT NULL AUTO_INCREMENT; -- -- Constraints for dumped tables --  -- -- Constraints for table `user` -- ALTER TABLE `user` ADD CONSTRAINT `FKuser29654` FOREIGN KEY (`tipo_userid`) REFERENCES `tipo_user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;  /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */; /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; ';
CREATE TABLE Rol (Id_rol int(2) NOT NULL AUTO_INCREMENT, rol varchar(25) NOT NULL, PRIMARY KEY (Id_rol));
CREATE TABLE cargo (id_cargo int(2) NOT NULL AUTO_INCREMENT, salario float NOT NULL, obligaciones varchar(255), tipo_cargoid int(2) NOT NULL, PRIMARY KEY (id_cargo));
CREATE TABLE tipo_cargo (id int(2) NOT NULL AUTO_INCREMENT, cargo varchar(255) NOT NULL, CONSTRAINT id PRIMARY KEY (id));
CREATE TABLE tipo_cliente (id int(2) NOT NULL AUTO_INCREMENT, tipo_cliente varchar(50) NOT NULL, PRIMARY KEY (id));
CREATE TABLE facilidades (id int(2) NOT NULL AUTO_INCREMENT, nombre varchar(255) NOT NULL, descripcion varchar(255) NOT NULL, PRIMARY KEY (id));
CREATE TABLE facilidad_cliente (clienteid varchar(6) NOT NULL, facilidadesid int(2) NOT NULL, consumida tinyint(1) NOT NULL, fecha int(10), PRIMARY KEY (clienteid, facilidadesid));
CREATE TABLE estado_pedido (id_estado int(1) NOT NULL AUTO_INCREMENT, estado varchar(255) NOT NULL, PRIMARY KEY (id_estado));
ALTER TABLE plato ADD INDEX FKplato825959 (tipo_plato), ADD CONSTRAINT FKplato825959 FOREIGN KEY (tipo_plato) REFERENCES tipo_plato (id);
ALTER TABLE bebida ADD INDEX FKbebida826754 (tipo_bebida), ADD CONSTRAINT FKbebida826754 FOREIGN KEY (tipo_bebida) REFERENCES tipo_bebida (id);
ALTER TABLE turno_trabajo_trabajador ADD INDEX FKturno_trab126730 (turno_trabajoid), ADD CONSTRAINT FKturno_trab126730 FOREIGN KEY (turno_trabajoid) REFERENCES turno_trabajo (id);
ALTER TABLE turno_trabajo_trabajador ADD INDEX FKturno_trab470101 (trabajadorid), ADD CONSTRAINT FKturno_trab470101 FOREIGN KEY (trabajadorid) REFERENCES trabajador (id);
ALTER TABLE bebida_pedido ADD INDEX FKbebida_ped466528 (bebidaid), ADD CONSTRAINT FKbebida_ped466528 FOREIGN KEY (bebidaid) REFERENCES bebida (id);
ALTER TABLE bebida_pedido ADD INDEX FKbebida_ped854003 (pedidoid), ADD CONSTRAINT FKbebida_ped854003 FOREIGN KEY (pedidoid) REFERENCES pedido (id);
ALTER TABLE pedido ADD INDEX FKpedido385995 (mesaid), ADD CONSTRAINT FKpedido385995 FOREIGN KEY (mesaid) REFERENCES mesa (id);
ALTER TABLE pedido ADD INDEX FKpedido638532 (clienteid), ADD CONSTRAINT FKpedido638532 FOREIGN KEY (clienteid) REFERENCES cliente (id);
ALTER TABLE plato_pedido ADD INDEX FKplato_pedi675615 (platoid), ADD CONSTRAINT FKplato_pedi675615 FOREIGN KEY (platoid) REFERENCES plato (id);
ALTER TABLE plato_pedido ADD INDEX FKplato_pedi284397 (pedidoid), ADD CONSTRAINT FKplato_pedi284397 FOREIGN KEY (pedidoid) REFERENCES pedido (id);
ALTER TABLE comentario ADD INDEX FKcomentario220115 (clienteid), ADD CONSTRAINT FKcomentario220115 FOREIGN KEY (clienteid) REFERENCES cliente (id);
ALTER TABLE comentario ADD INDEX FKcomentario283701 (bebidaid), ADD CONSTRAINT FKcomentario283701 FOREIGN KEY (bebidaid) REFERENCES bebida (id);
ALTER TABLE comentario ADD INDEX FKcomentario213015 (platoid), ADD CONSTRAINT FKcomentario213015 FOREIGN KEY (platoid) REFERENCES plato (id);
ALTER TABLE comentario ADD INDEX FKcomentario275914 (presentacionid), ADD CONSTRAINT FKcomentario275914 FOREIGN KEY (presentacionid) REFERENCES presentacion (id);
ALTER TABLE comentario ADD INDEX FKcomentario200715 (turno_trabajoid), ADD CONSTRAINT FKcomentario200715 FOREIGN KEY (turno_trabajoid) REFERENCES turno_trabajo (id);
ALTER TABLE receta_ingredientes_bebidas ADD INDEX FKreceta_ing405121 (Receta_Bebidaid), ADD CONSTRAINT FKreceta_ing405121 FOREIGN KEY (Receta_Bebidaid) REFERENCES Receta_Bebida (id);
ALTER TABLE receta_ingredientes_bebidas ADD INDEX FKreceta_ing593169 (IngredientesId_ingrediente), ADD CONSTRAINT FKreceta_ing593169 FOREIGN KEY (IngredientesId_ingrediente) REFERENCES Ingredientes (Id_ingrediente);
ALTER TABLE bebida ADD INDEX FKbebida600383 (preparacion), ADD CONSTRAINT FKbebida600383 FOREIGN KEY (preparacion) REFERENCES Receta_Bebida (id);
ALTER TABLE receta_ingredientes_platos ADD INDEX FKreceta_ing790915 (IngredientesId_ingrediente), ADD CONSTRAINT FKreceta_ing790915 FOREIGN KEY (IngredientesId_ingrediente) REFERENCES Ingredientes (Id_ingrediente);
ALTER TABLE receta_ingredientes_platos ADD INDEX FKreceta_ing784079 (receta_platoid), ADD CONSTRAINT FKreceta_ing784079 FOREIGN KEY (receta_platoid) REFERENCES receta_plato (id);
ALTER TABLE plato ADD INDEX FKplato794461 (preparacion), ADD CONSTRAINT FKplato794461 FOREIGN KEY (preparacion) REFERENCES receta_plato (id);
ALTER TABLE trazas ADD INDEX FKtrazas95428 (userid_user), ADD CONSTRAINT FKtrazas95428 FOREIGN KEY (userid_user) REFERENCES `user` (id_user);
ALTER TABLE cliente ADD INDEX FKcliente924002 (id), ADD CONSTRAINT FKcliente924002 FOREIGN KEY (id) REFERENCES `user` (id_user);
ALTER TABLE trabajador ADD INDEX FKtrabajador186263 (id), ADD CONSTRAINT FKtrabajador186263 FOREIGN KEY (id) REFERENCES `user` (id_user);
ALTER TABLE cargo ADD INDEX FKcargo330823 (tipo_cargoid), ADD CONSTRAINT FKcargo330823 FOREIGN KEY (tipo_cargoid) REFERENCES tipo_cargo (id);
ALTER TABLE trabajador ADD INDEX FKtrabajador382309 (cargoid_cargo), ADD CONSTRAINT FKtrabajador382309 FOREIGN KEY (cargoid_cargo) REFERENCES cargo (id_cargo);
ALTER TABLE cliente ADD INDEX FKcliente404372 (tipo_clienteid), ADD CONSTRAINT FKcliente404372 FOREIGN KEY (tipo_clienteid) REFERENCES tipo_cliente (id);
ALTER TABLE facilidad_cliente ADD INDEX FKfacilidad_767737 (clienteid), ADD CONSTRAINT FKfacilidad_767737 FOREIGN KEY (clienteid) REFERENCES cliente (id);
ALTER TABLE facilidad_cliente ADD INDEX FKfacilidad_663799 (facilidadesid), ADD CONSTRAINT FKfacilidad_663799 FOREIGN KEY (facilidadesid) REFERENCES facilidades (id);
ALTER TABLE bebida_pedido ADD INDEX FKbebida_ped417591 (estado), ADD CONSTRAINT FKbebida_ped417591 FOREIGN KEY (estado) REFERENCES estado_pedido (id_estado);
ALTER TABLE plato_pedido ADD INDEX FKplato_pedi279190 (estado), ADD CONSTRAINT FKplato_pedi279190 FOREIGN KEY (estado) REFERENCES estado_pedido (id_estado);
ALTER TABLE `user` ADD INDEX FKuser681460 (RolId_rol), ADD CONSTRAINT FKuser681460 FOREIGN KEY (RolId_rol) REFERENCES Rol (Id_rol);
ALTER TABLE bebida ADD INDEX FKbebida946290 (), ADD CONSTRAINT FKbebida946290 FOREIGN KEY () REFERENCES bebida ();
